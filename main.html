<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Google Icons (Material Design)-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <style>
        .nav-item {
            color: purple;
        }

        .logo {
            width: 120px;
            height: 120px;
            border-radius: 75px;
            background-image: url(images/navbar_logo.jpg);
            background-position: center;
            background-size: 110px;
            justify-self: center;
            align-self: center;
        }

        #postButton {
            margin-left: 80%;
        }

        @media only screen and (max-width: 400px) {
            #postButton {
                float: right;
            }

            .modal-body {
                
            }
        }
    </style>
</head>

<body>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
    </script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
</body>

<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-light bg-success">
    <div class="container-fluid">
        <a class="navbar-brand">
            <div class="logo">
            </div>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="main.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Saved</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Navigate</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="loginpage.html">Sign out</a>
                </li>
            </ul>

            <!-- Button trigger modal -->
            <div id="postButton">
                <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#exampleModal">
                    Post
                </button>
            </div>

        </div>
    </div>
</nav>

<br>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Make a post</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="exampleFormControlInput1">Title</label>
                        <input type="email" class="form-control" id="exampleFormControlInput1" placeholder="Title">
                    </div>
                    <label class="form-label" for="customFile">Upload an image</label>
                    <input type="file" class="form-control" id="customFile" />
                    <div class="form-group">
                        <label for="exampleFormControlTextarea1">Story</label>
                        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" placeholder="Type your story here..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Post</button>
            </div>
        </div>
    </div>
</div>

<!-- Banner -->
<div class="container-fluid bg-dark text-light p-5">
    <div class="container bg-dark p-5">
        <h1 class="display-4">Good morning, <span id="name-goes-here"></span></h1>
        <hr>
        <p>Quote of the day: <span id="quote-goes-here"></span></p>
    </div>
</div>

<!-- Covid Story 1 -->
<nav class="navbar navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">
            Covid story 1
            <br>
            <img src="images/covidstory1.jpg" alt="" width="400" height="300" class="d-inline-block align-text-top">
        </a>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
            Suspendisse rhoncus lacus eget interdum ullamcorper.
            In a bibendum enim, a convallis lorem. Suspendisse potenti.
            Integer rutrum ex quam, eu suscipit odio sollicitudin a.
            Nunc posuere nibh ullamcorper tortor dapibus, et bibendum nisl vehicula.
            Sed gravida nisl et urna sollicitudin, eget pulvinar metus efficitur.
            In libero est, tempor et libero at, ultrices laoreet magna.
            Donec blandit ipsum non urna porta maximus.
        </p>
    </div>
</nav>

<br>

<!-- Covid Story 2 -->
<nav class="navbar navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">
            Covid story 2
            <br>
            <img src="images/covidstory2.jpg" alt="" width="400" height="300" class="d-inline-block align-text-top">
        </a>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
            Suspendisse rhoncus lacus eget interdum ullamcorper.
            In a bibendum enim, a convallis lorem. Suspendisse potenti.
            Integer rutrum ex quam, eu suscipit odio sollicitudin a.
            Nunc posuere nibh ullamcorper tortor dapibus, et bibendum nisl vehicula.
            Sed gravida nisl et urna sollicitudin, eget pulvinar metus efficitur.
            In libero est, tempor et libero at, ultrices laoreet magna.
            Donec blandit ipsum non urna porta maximus.
        </p>
    </div>
</nav>

<!-- Covid Story 3 -->
<nav class="navbar navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="postpage.html">
            Covid story 3
            <br>
            <img src="images/covidstory3.jpg" alt="" width="400" height="300" class="d-inline-block align-text-top">
        </a>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
            Suspendisse rhoncus lacus eget interdum ullamcorper.
            In a bibendum enim, a convallis lorem. Suspendisse potenti.
            Integer rutrum ex quam, eu suscipit odio sollicitudin a.
            Nunc posuere nibh ullamcorper tortor dapibus, et bibendum nisl vehicula.
            Sed gravida nisl et urna sollicitudin, eget pulvinar metus efficitur.
            In libero est, tempor et libero at, ultrices laoreet magna.
            Donec blandit ipsum non urna porta maximus.
        </p>
    </div>
</nav>

<!-- Sticky Footer -->
<footer class="navbar justify-content-evenly fixed-bottom">
    <small>DTC 16</small>
</footer>

<!-- Scripts -->
<script>
    function read_display_Quote() {
        db.collection("quotes").doc(
                "Tuesday"
            ) //name of the collection and documents should matach excatly with what you have in Firestore
            .onSnapshot(TuesdayDoc => { //
                //console.log("current document data: " + TuesdayDoc.data()); //.data() returns data object
                document.getElementById("quote-goes-here").innerHTML = TuesdayDoc.data()
                    .quote; //using vanilla javascript
            })
    }
    //read_display_Quote()

    function insertName() {
        firebase.auth().onAuthStateChanged(user => {
            // Check if user is signed in:
            if (user) {
                // Do something for the current logged-in user here: 
                //console.log(user.uid);
                //go to the correct user document by referencing to the user uid
                currentUser = db.collection("users").doc(user.uid)
                //get the document for current user.
                currentUser.get()
                    .then(userDoc => {
                        var user_Name = userDoc.data().name;
                        //console.log(user_Name);
                        //document.getElementById("username").innerText = n;                     //using javascript
                        $("#name-goes-here").text(user_Name); //using jquery
                    })
            } else {
                // No user is signed in.
            }
        });
    }
    insertName();

    function writeHikes() {
        //define a variable for the collection you want to create in Firestore to populate data
        var hikesRef = db.collection("Hikes");

        hikesRef.add({
            code: "BBY01",
            name: "Burnaby Lake Park Trail", //replace with your own city?
            city: "Burnaby",
            province: "BC",
            level: "easy",
            length: "10 km",
            length_time: "2h 33mm"
        });
        hikesRef.add({
            code: "AM01",
            name: "Buntzen Lake Trail Trail", //replace with your own city?
            city: "Anmore",
            province: "BC",
            level: "moderate",
            length: "10.5 km",
            length_time: "3h 17mm"
        });
        hikesRef.add({
            code: "NV01",
            name: "Mount Seymoure Trail", //replace with your own city?
            city: "North Vancouver",
            province: "BC",
            level: "hard",
            length: "8.2 km",
            length_time: "3h 20m"
        });
    }


    function displayHikes() {
        db.collection("Hikes").get()
            .then(allHikes => {
                allHikes.forEach(doc => {
                    var hikeName = doc.data().name; //gets the name field
                    var hikeID = doc.data().code; //gets the unique ID field
                    document.getElementById(hikeID).innerText = hikeName;
                })

            })
    }
    //displayHikes();
</script>


</html>